(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{319:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(29),o=n(162),l=n.n(o),s=n(9),c=n.n(s),u=n(30),p=n.n(u),d=n(54);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,n,r,i=b(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),S(v(t=i.call(this,e)),"handleMouseLeave",(function(){t.setState({ratingPreview:0})})),S(v(t),"handleMouseOver",(function(e){t.setState({ratingPreview:e+1})})),S(v(t),"handleClick",(function(e){var n=t.props.onChange;t.setState({rating:e+1,ratingPreview:0},(function(){n(e+1)}))})),t.state={stars:new Array(5).fill(5),rating:0,ratingPreview:0},t}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.state,n=t.stars,r=t.rating,i=t.ratingPreview;return a.a.createElement("span",{className:"mr-2 wrapper-stars",onMouseLeave:function(){return e.handleMouseLeave()}},n.map((function(t,n){return r&&n<r||i&&n<i?a.a.createElement("i",{key:n,className:"fas fa-star ".concat("fa-2x cursor-pt"),onMouseOver:function(){return e.handleMouseOver(n)},onClick:function(){return e.handleClick(n)}}):a.a.createElement("i",{key:n,className:"far fa-star ".concat("fa-2x cursor-pt"),onMouseOver:function(){return e.handleMouseOver(n)}})})))}}])&&f(t.prototype,n),r&&f(t,r),o}(r.PureComponent),x=n(743),E=n.n(x),w=n(40);var O=c.a._css,_=function(e){var t=e.prefixCss,n=e.mode,r=e.onAction,i=e.useMarginT,o=e.style,l=e.btnCss,s=e.pendingSend,c=e.cta,u=e.btnAlign;if(l&&(c.class=c.class+" "+l),s)return a.a.createElement("i",{className:"fas fa-spinner fa-pulse"});var p,m,f,h="text-center";return"right"===u?h="text-right":"left"===u&&(h="text-left"),a.a.createElement("div",(p={className:!1!==i?"mt-2":""},m="className",f=O("",!1!==i&&"mt-2",h),m in p?Object.defineProperty(p,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[m]=f,p),a.a.createElement(d.a,{prefixCss:t,mode:n,cta:c,style:o,onAction:r}))},C=n(52),N=n.n(C);n(857);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z,V=c.a._Popup,W=c.a._loadScript,G=(c.a._debounce,c.a._store.getEnv()),H=G.scheme,X=G.domain,Q=G.subdomain,Y=G.apiProd,Z=G.domainApi,$=Y?Z:X,K=Y?Q:"form",ee=("".concat(H,"://").concat(K,".").concat($).replace("__API__","form"),p.a.CancelToken),te=c.a._css;n(855);var ne=c.a._reactSortableHoc,re=(ne.SortableContainer,ne.SortableItem,ne.arrayMove),ae=(ne.sortableHandle,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(s,e);var t,n,r,o=L(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),J(B(t=o.call(this,e)),"onSortEnd",(function(e){var n=e.oldIndex,r=e.newIndex;n!==r&&t.setState((function(e){var t=e.formItems;return{formItems:re(t,n,r)}}))})),J(B(t),"closeModal",(function(){t.setState({showSuccessMsg:!1,openedModal:!1}),t.props.onCloseModal()})),J(B(t),"renderMap",(function(e,n,r){var i=t.props,o=i.ui,l=i.onAction,s=i.mode,c=r||{width:"100%",height:"".concat(n||300,"px"),border:"0px"};return a.a.createElement("div",null,o.map&&e.src&&"iframe"===e.tpl&&a.a.createElement("div",{style:c,onClick:function(){l({action:"click_iframe"})}},a.a.createElement("iframe",{style:c,className:"embed-responsive-item d-block",src:e.src,allowtransparency:"true",allowFullScreen:!0})),e.src&&"img"===e.tpl&&a.a.createElement("div",null,a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(w.a,{item:e,cfgToolbar:{},onAction:function(e){return console.log(e)},mode:s}))))}));var n=JSON.parse(JSON.stringify(e.schema)),r={},i={};e.autoAddUi&&(r={ratingWidget:k,captcha:le},i={recaptcha:{"ui:widget":"captcha","ui:options":{label:!1}},Note:{"ui:widget":"ratingWidget"},"ui:order":["Email","*"]},n.properties.Nom&&i["ui:order"].unshift("Nom"));var l=(t.props.blocks.find((function(e){return"media"===e.name}))||{item:null}).item;e.addEmail&&(localStorage.getItem("currentUser")&&"edit"!==e.mode?(i["ui:order"]=i["ui:order"].filter((function(e){return"Email"!==e})),n.properties.Email&&(delete n.properties.Email,n.required=n.required.filter((function(e){return"Email"!==e})))):n.required.find((function(e){return"Email"===e}))||(n.required.push("Email"),n.properties.Email={type:"string",format:"email",title:"Email"}));return t.state={schema:n,widgets:r,uiSchema:R({},e.uiSchema,i),error:null,item:l||null,bearer:{},isLoaded:!1,pathGet:e.url,pathSave:e.urlSave,cancelToken:null,keyForm:1,cta:(e.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta,mepRender:{full:function(e,n,r,a){return t.mepFull(!1,e,n,r,a)},"full-reverse":function(e,n,r,a){return t.mepFull(!0,e,n,r,a)},stack:function(e,n,r,a){return t.mepStack(!1,e,n,r,a)},"stack-reverse":function(e,n,r,a){return t.mepStack(!0,e,n,r,a)},"only-map":function(e,n,r,a){return t.mepOnlyMap(e,r)}},pendingSend:!1,showSuccessMsg:!1,openedModal:!1,loadingFailed:!0,forms:[],formItems:t.initFormItems(e.formItems),idForm:1,idFormEdit:1,popoverIsOpen:!1},t.doValidation=t.doValidation.bind(B(t)),t.refBtnSubmit=a.a.createRef(),t.requestState=t.requestState.bind(B(t)),t.cleanStrings=t.cleanStrings.bind(B(t)),t.cleanFormItemsInState=t.cleanFormItemsInState.bind(B(t)),t.refPopup=a.a.createRef(),t.limitations={optionsByField:{max:15},fieldsByForm:{max:"FREE"!==window.__PLAN_SITE?20:10}},t}return t=s,(n=[{key:"exportData",value:function(){var e=[];for(var t in this.state.formItems){var n=this.state.formItems[t],r={label:n.label,required:n.required,name:n.name,helpText:n.helpText,placeholder:n.placeholder,className:n.className,options:n.options,multiple:n.multiple,type:n.type};e.push(r)}a=e,i=new FormData,Object.keys(a).forEach((function(e){return i.append(e,a[e])}));var a,i,o=this,l=this.state.bearer;p.a.post("http://form.wifeo.org/form/create",{items:e},{headers:{Authorization:l,"Content-Type":"application/json"}}).then((function(e){o.getFormulaires()})).catch((function(e){console.log(e)}))}},{key:"onAddressChange",value:function(e){var t="https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q="+encodeURI(e.target.value)+"&output=embed";this.setState({item:{src:t,address:e.target.value}}),this.props.onAction({action:"map_changed",params:this.state})}},{key:"postForm",value:function(e){var t=this,n=this.props,r=n.onSend,a=n.resourceId,i=n.idsChannels,o=i||[],l={data:e.formData,channels:o},s=(this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null}).cta;a&&(l.module_resource=a);var c={"Content-Type":"application/json"},u=localStorage.getItem("currentUser");u&&(c.Authorization="Bearer ".concat(u)),p.a.post(this.state.pathSave,l,{headers:c}).then((function(e){t.setState({pendingSend:!1,keyForm:t.state.keyForm+1,showSuccessMsg:!0,openedModal:!0},(function(){r(),!0===t.props.redirection&&(s.newOnglet?window.open("".concat(s.link),"_blank"):location.href=s.link)}))})).catch((function(e){console.log(e)}))}},{key:"doValidation",value:function(e){var t=this;this.setState({pendingSend:!0},(function(){t.postForm(e)}))}},{key:"fetchForm",value:function(){var e=this;p.a.get(this.state.pathGet+"?no_cache=1",{cancelToken:new ee((function(e){z=e}))}).then((function(t){if(void 0!==JSON.parse(t.data.fields).schema)N.a.unstable_batchedUpdates((function(){e.setState({isLoaded:!0,loadingFailed:!1,schema:JSON.parse(t.data.fields).schema,formItems:JSON.parse(t.data.fields).formItems,uiSchema:JSON.parse(t.data.fields).uiSchema})}));else{var n=e.props.schema;localStorage.getItem("currentUser")&&"edit"!==e.props.mode?n.properties.Email&&(delete n.properties.Email,n.required=n.required.filter((function(e){return"Email"!==e}))):n.required.find((function(e){return"Email"===e}))||(n.required.unshift("Email"),n.properties.Email={type:"string",format:"email",title:"Email"}),N.a.unstable_batchedUpdates((function(){e.setState({isLoaded:!0,loadingFailed:!1,uiSchema:e.props.uiSchema,schema:n})}))}})).catch((function(t){e.setState({isLoaded:!0,loadingFailed:!0})}))}},{key:"componentDidMount",value:function(){var e=this;if(this.state.pathGet?this.props.integrated?this.props.staticForm?this.setState({isLoaded:!0,loadingFailed:!1,schema:this.props.staticForm.schema,formItems:this.props.staticForm.formItems,uiSchema:this.props.staticForm.uiSchema}):(console.log("Failed 1"),this.setState({loadingFailed:!0})):this.fetchForm():(console.log("Failed 2"),this.setState({loadingFailed:!0})),!this.props.externalCta){var t=this.state.cta;t&&(t.tpl="BtnBootstrapSubmit",t.onAction=function(t){e.refBtnSubmit.current&&e.refBtnSubmit.current.click()},W("https://www.google.com/recaptcha/api.js","js","recaptcha").then((function(){e.setState({cta:t})})))}}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){z&&"function"==typeof z&&z()}},{key:"renderHiddenBtnSubmit",value:function(){return a.a.createElement("button",{ref:this.refBtnSubmit,type:"submit",className:"d-none"})}},{key:"renderBtnSubmit",value:function(e,t,n){var r=this.props,i=r.prefixCss,o=r.mode,l=r.onAction,s=this.state,c=s.cta,u=s.pendingSend;return n&&(c.class=c.class+" "+n),u?a.a.createElement("i",{className:"fas fa-spinner fa-pulse"}):a.a.createElement("div",{className:!1!==e?"mt-2":""},a.a.createElement(d.a,{prefixCss:i,mode:o,cta:c,style:t,onAction:l}))}},{key:"requestState",value:function(){var e=this.state,t=(e.schema,e.uiSchema,e.widgets,e.showErrorRecaptcha,e.loadingFailed),n=e.isLoaded;return a.a.createElement("div",null,n&&t&&a.a.createElement("div",{align:"center"},a.a.createElement("i",{className:"fa fa-times"}),a.a.createElement("span",null,"   Formulaire introuvable ou supprimé...")),t&&!n&&a.a.createElement("div",{align:"center"},a.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-fw"}),a.a.createElement("span",null,"  Chargement en cours...")))}},{key:"mepFull",value:function(e,t,n,r,o){var l=this.props,s=(l.mode,l.prefixCss),c=(l.onAction,l.btnAlign),u=this.state,p=(u.schema,u.uiSchema,u.widgets,u.showErrorRecaptcha,u.loadingFailed);return a.a.createElement("div",{key:"mepFull"},!e&&r&&this.renderMap(r),a.a.createElement(i.a,T({title:t},this.props),a.a.createElement("div",{className:te(s,"row")},a.a.createElement("div",{className:te(s,"col-12 col-md-12",e&&"order-2")},a.a.createElement("div",null,!p&&this.renderForm(),!p&&a.a.createElement("div",{className:"text-right"},a.a.createElement(_,{cta:o,btnAlign:c})),this.requestState())))),e&&this.renderMap(r))}},{key:"renderForm",value:function(){var e,t=this,n=this.props,r=(n.ui,n.mode,this.state),i=r.schema,o=r.uiSchema,s=r.widgets,c=(r.showErrorRecaptcha,r.formItems,r.idFormEdit,r.idForm,r.popoverIsOpen,r.showSuccessMsg,r.openedModal,r.cta,r.isLoaded,r.loadingFailed);return this.props.typeForm||(o={Message:{"ui:widget":"textarea"},"text_cbb92f23-cf93-4b51-9869-416faf4910ab":{"ui:widget":"text","ui:placeholder":"motif, sujet, suggestion","ui:help":"","ui:title":"Nom"},Email:{"ui:widget":"email","ui:placeholder":"email@example.com","ui:help":"","ui:title":"Email"},"textarea_0bdff9b3-d51b-4ef1-95ca-dc50cc1aa098":{"ui:widget":"textarea","ui:placeholder":"Votre message","ui:help":"","ui:title":"Votre message"},"checkbox_3625aced-613b-43f4-9777-636219a418cb":{"ui:widget":"checkbox","ui:help":"","ui:title":"En soumettant ce formulaire, j'accepte que les informations saisies soient exploitées dans le cadre de la relation commerciale qui peut en découler. Vous affirmez avoir pris connaissance de notre politique de confidentialité. Vous pouvez vous désinscrire à tout moment à l'aide des liens de désinscription"},"ui:order":["text_cbb92f23-cf93-4b51-9869-416faf4910ab","Email","textarea_0bdff9b3-d51b-4ef1-95ca-dc50cc1aa098","checkbox_3625aced-613b-43f4-9777-636219a418cb","*"],testCheckbox:{"ui:widget":"radio"}}),!c&&a.a.createElement(l.a,{schema:i,onError:(e="errors",console.log.bind(console,e)),onSubmit:this.doValidation,showErrorList:!1,liveValidate:!0,uiSchema:o,widgets:s,FieldTemplate:function(e){return a.a.createElement(ie,T({useOnlyUiTitle:"Contact"!==t.props.sectionTplName&&t.props.useOnlyUiTitle},e))}},this.renderHiddenBtnSubmit())}},{key:"mepOnlyMap",value:function(e,t){var n={},r="mx-auto",o=R({},this.props);return this.props.ui.mapFullWdithScreen&&(n={marginLeft:"-15px",marginRight:"-15px"},o.containerCss="container-fluid",r=""),a.a.createElement(i.a,T({key:"mepOnlyMap",title:e},o),a.a.createElement("div",{className:r,style:n},this.renderMap(t,null,{minHeight:"500px",border:"0px",width:"100%"})))}},{key:"initFormItems",value:function(e){var t=[];return this.props.addEmail?e.find((function(e){return"Email"===e.name}))||(t=[].concat(I(e),[{type:"email",labelMenu:"Email",label:"Email",className:"form-control",name:"Email",required:!0,placeholder:"email@example.com",helpText:"",minLength:1,maxLength:75}])):t=I(e),t}},{key:"cleanStrings",value:function(e){return"string"==typeof e?e.replace(/["]+/g,"'"):""}},{key:"getEnumFieldRJSF",value:function(e){var t=this;if(["radio","select"].indexOf(e.type)>=0)return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getEnumCheckboxFieldRJSF",value:function(e){var t=this;return e.options.map((function(e){return t.cleanStrings(e.label)}))}},{key:"getTypeFieldRJSF",value:function(e){return{checkbox:"Case à cocher"===e.labelMenu?"boolean":"array",number:"number"}[e.type]||"string"}},{key:"getWidgetFieldRJSF",value:function(e){return{email:"email",date:"date",number:"updown",radio:"radio",checkbox:"Case à cocher"===e.labelMenu?"checkbox":"checkboxes",select:"select",text:"text",textarea:"textarea"}[e.type]||"text"}},{key:"buildSchema",value:function(){var e=this,t=this.props.ui,n={title:"",description:"",type:"object"},r=this.state.formItems,a={},i=[];return r.forEach((function(n){a[n.name]={},a[n.name].minLength=n.minLength,a[n.name].maxLength=n.maxLength;var r=null;if(n.options){var o=n.options.find((function(e){return!0===e.selected}));r=o&&o.label||void 0}r=e.cleanStrings(r),a[n.name].type=e.getTypeFieldRJSF(n),a[n.name].enum=e.getEnumFieldRJSF(n),a[n.name].title=e.cleanStrings(t.label&&n.label||""),"checkbox"===n.type&&("Case à cocher"===n.labelMenu?a[n.name].title=e.cleanStrings(n.options[0].label):(a[n.name].uniqueItems=!0,a[n.name].items={type:"string",enum:e.getEnumCheckboxFieldRJSF(n)})),"select"===n.type&&(a[n.name].default=r),"radio"===n.type&&(a[n.name].default=r),"number"===n.type&&(a[n.name].minimum=0),n.required&&i.push(n.name)})),n.properties=a,n.required=i,n}},{key:"buildUiSchema",value:function(){var e=this,t=this.props.ui,n={Message:{"ui:widget":"textarea"}},r=[];return this.state.formItems.forEach((function(a){n[a.name]={"ui:widget":e.getWidgetFieldRJSF(a),"ui:placeholder":e.cleanStrings(a.placeholder),"ui:help":e.cleanStrings(a.helpText),"ui:title":e.cleanStrings(t.label&&a.label||"")},r.push(a.name)})),r.push("*"),n["ui:order"]=r,n.testCheckbox={"ui:widget":"radio"},n}},{key:"mepStack",value:function(e,t,n,r,o){var l=this.props,s=(l.mode,l.prefixCss),c=(l.onAction,l.ui),u=this.state,p=(u.schema,u.uiSchema,u.widgets,u.showErrorRecaptcha,u.loadingFailed),d=(u.isLoaded,r&&r.src&&c.map);return a.a.createElement(i.a,T({key:"mepStack",title:t},this.props),a.a.createElement("div",{className:te(s,"row")},a.a.createElement("div",{className:te(s,"col-12","col-md-6",!d&&"mx-auto",e&&"order-2")},a.a.createElement("div",null,!p&&this.renderForm(),!p&&a.a.createElement(_,T({cta:o},this.props)),this.requestState())),d&&a.a.createElement("div",{className:te(s,"col-12 col-md-6",e&&"order-1")},this.renderMap(r))))}},{key:"integratedMep",value:function(e,t,n,r,i){var o=this.props,l=(o.mode,o.prefixCss),s=(o.onAction,o.ui),c=this.state,u=(c.schema,c.uiSchema,c.widgets,c.showErrorRecaptcha,c.loadingFailed),p=(c.isLoaded,r&&r.src&&s.map);return a.a.createElement("div",{className:te(l,"row")},a.a.createElement("div",{className:te(l,"col-12","col-md-6",!p&&"mx-auto",e&&"order-2")},a.a.createElement("div",null,!u&&this.renderForm(),!u&&a.a.createElement(_,T({cta:i},this.props)),this.requestState())))}},{key:"cleanFormItemsInState",value:function(){var e=this,t=R({},this.state),n=[];return this.state.formItems.forEach((function(t){var r=t;if(r.label=e.cleanStrings(t.label),r.helpText=e.cleanStrings(t.helpText),r.placeholder=e.cleanStrings(t.placeholder),void 0!==t.options){var a=[];t.options.forEach((function(t){var n=t;n.label=e.cleanStrings(t.label),n.value=e.cleanStrings(t.value),a.push(n)})),r.options=a}n.push(r)})),t.formItems=n,t}},{key:"traverse",value:function(e){var t=this;if(null!==e&&"object"==P(e))return Object.entries(e).forEach((function(e){var n=F(e,2),r=(n[0],n[1]);t.traverse(r)})),e}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.blocks.find((function(e){return"cta"===e.name}))||{cta:null},r=this.state.cta;if(n&&r&&n.cta.link!==r.link){var a=r;a.link=n.cta.link,this.setState({cta:a})}}},{key:"render",value:function(){var e=this.props,t=e.mep,n=e.blocks,r=(e.prefixCss,e.mode,e.onAction,e.ui);e.onSend,console.log("FormProps",this.props);var i=this.state,o=i.mepRender,l=i.item,s=i.showSuccessMsg,c=i.openedModal,u=(n.find((function(e){return"title"===e.name}))||{title:null}).title,p=(n.find((function(e){return"description"===e.name}))||{description:null}).description,d=(n.find((function(e){return"cta"===e.name}))||{cta:null}).cta,m=(n.find((function(e){return"msgSuccess"===e.name}))||{msgSuccess:{txt:'<p style="text-align:center;">Votre message a bien été envoyé. Nous y répondrons dès que possible.</p>'}}).msgSuccess;return this.props.integrated?[this.integratedMep(!1,u,p,l,d),a.a.createElement("div",{className:s?"":"d-none",key:"success-msg"},a.a.createElement(V,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:c,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header border-0 pb-0"},a.a.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},a.a.createElement("span",{"aria-hidden":"true"},"×"))),a.a.createElement("div",{className:"modal-body pt-0"},a.a.createElement("div",null,a.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.txt}}))))))]:[o[t]&&o[t](u,p,r.map&&l,d)||o["stack-reverse"](u,p,r.map&&l,d),a.a.createElement("div",{className:s?"":"d-none",key:"success-msg"},a.a.createElement(V,{contentStyle:{color:"initial",margin:"5rem auto auto auto",background:"none",padding:0,border:0},open:c,onClose:this.closeModal,modal:!0,closeOnDocumentClick:!0},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header border-0 pb-0"},a.a.createElement("button",{type:"button",className:"close",onClick:this.closeModal,"data-dismiss":"modal","aria-label":"Close"},a.a.createElement("span",{"aria-hidden":"true"},"×"))),a.a.createElement("div",{className:"modal-body pt-0"},a.a.createElement("div",null,a.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.txt}}))))))]}}])&&A(t.prototype,n),r&&A(t,r),s}(r.Component));ae.defaultProps={integrated:!1,useOnlyUiTitle:!0,formItems:[],autoAddUi:!0,resourceId:null,addEmail:!0,uiSchema:{Message:{"ui:widget":"textarea"}},url:null,urlSave:null,ui:{label:!0,map:!1,mapFullWdithScreen:!0},schema:{title:"",description:"",type:"object",required:["Email","Message","Nom","Note"],properties:{Nom:{type:"string",title:"Nom",minLength:2},Email:{type:"string",format:"email",title:"Email"},Note:{type:"number",enum:[1,2,3,4,5],title:"Note"},Message:{type:"string",title:"Message",minLength:8}}},onCloseModal:function(){},onAction:function(){},prefixCss:"",mep:"stack-reverse",mode:"view",sectionCss:"",containerCss:"container",bg:{class:"bg-white"},redirection:!1,blocks:[{name:"cta",cta:{txt:"Nous contacter",css:"",class:"btn-primary",link:"/faire-un-site-gratuitement.php",tpl:"BtnBootstrap",visible:!0,icon:{active:!0,css:"far fa-envelope"}}},{name:"title",title:{txt:"<h1>Demande d'informations</h1>",class:"",visible:!1}},{name:"description",description:{txt:"Pour toutes vos questions, veuillez remplir le formulaire ci-dessous"}},{name:"media",item:{src:"https://maps.google.fr/maps?f=q&source=s_q&hl=fr&geocode=&q=paris&output=embed",address:"paris",tpl:"iframe",visible:!1}}],btnAlign:"center",onSend:function(){}};var ie=function(e){var t=e.id,n=e.classNames,r=e.label,i=e.help,o=e.required,l=e.rawErrors,s=e.description,c=(e.errors,e.children),u=e.displayLabel,p=e.hidden,d=e.useOnlyUiTitle?e.uiSchema["ui:title"]:r;return a.a.createElement("div",{className:n+" "},u&&!p&&a.a.createElement("label",{className:"control-label font-weight-bold",htmlFor:t},d,d&&o?"*":null),s,c,l&&l.length>0&&a.a.createElement(oe,{errors:l}),a.a.createElement("small",{className:"form-text text-muted"}," ",i))},oe=function(e){var t=e.errors;return a.a.createElement("ul",{className:"list-unstyled mt-2"},t.map((function(e,t){return a.a.createElement("li",{key:t,className:"text-danger"}," ",a.a.createElement(ce,{msg:e})," ")})))},le=function(e){return a.a.createElement(E.a,{key:"captcha",sitekey:"6LcAZCkUAAAAAJ2XQcVz6M2qgiwypmqhT501lFvv",render:"explicit",hl:"fr",verifyCallback:function(t){(0,e.onChange)(t)},expiredCallback:function(t){(0,e.onChange)(t)}})},se={"is a required property":"Veuillez remplir ce champ",'should match format "email"':"Email non valide","should NOT be shorter than _X_ characters":"Veuillez allonger ce texte pour qu'il comporte au moins _X_ caractères","should NOT be longer than _X_ characters":"Veuillez réduire ce texte à _X_ caractères maximun"},ce=function(e){var t=e.msg,n=t,r=n.match(/\d+/),a=0;return r&&(n=n.replace(r[0],"_X_"),a=r[0]),se[n]?se[n].replace("_X_",a):t};t.default=ae},743:function(e,t,n){var r;e.exports=(r=n(0),function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),o=r(i),l=r(n(4)),s={className:l.default.string,onloadCallbackName:l.default.string,elementID:l.default.string,onloadCallback:l.default.func,verifyCallback:l.default.func,expiredCallback:l.default.func,render:l.default.oneOf(["onload","explicit"]),sitekey:l.default.string,theme:l.default.oneOf(["light","dark"]),type:l.default.string,verifyCallbackName:l.default.string,expiredCallbackName:l.default.string,size:l.default.oneOf(["invisible","compact","normal"]),tabindex:l.default.string,hl:l.default.string,badge:l.default.oneOf(["bottomright","bottomleft","inline"])},c=function(){return"undefined"!=typeof window&&void 0!==window.grecaptcha&&"function"==typeof window.grecaptcha.render},u=void 0,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._renderGrecaptcha=n._renderGrecaptcha.bind(n),n.reset=n.reset.bind(n),n.state={ready:c(),widget:null},n.state.ready||"undefined"==typeof window||(u=setInterval(n._updateReadyState.bind(n),1e3)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.state.ready&&this._renderGrecaptcha()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.render,a=n.onloadCallback;"explicit"===r&&a&&this.state.ready&&!t.ready&&this._renderGrecaptcha()}},{key:"componentWillUnmount",value:function(){clearInterval(u)}},{key:"reset",value:function(){var e=this.state,t=e.ready,n=e.widget;t&&null!==n&&grecaptcha.reset(n)}},{key:"execute",value:function(){var e=this.state,t=e.ready,n=e.widget;t&&null!==n&&grecaptcha.execute(n)}},{key:"_updateReadyState",value:function(){c()&&(this.setState({ready:!0}),clearInterval(u))}},{key:"_renderGrecaptcha",value:function(){this.state.widget=grecaptcha.render(this.props.elementID,{sitekey:this.props.sitekey,callback:this.props.verifyCallback?this.props.verifyCallback:void 0,theme:this.props.theme,type:this.props.type,size:this.props.size,tabindex:this.props.tabindex,hl:this.props.hl,badge:this.props.badge,"expired-callback":this.props.expiredCallback?this.props.expiredCallback:void 0}),this.props.onloadCallback&&this.props.onloadCallback()}},{key:"render",value:function(){return"explicit"===this.props.render&&this.props.onloadCallback?o.default.createElement("div",{id:this.props.elementID,"data-onloadcallbackname":this.props.onloadCallbackName,"data-verifycallbackname":this.props.verifyCallbackName}):o.default.createElement("div",{id:this.props.elementID,className:this.props.className,"data-sitekey":this.props.sitekey,"data-theme":this.props.theme,"data-type":this.props.type,"data-size":this.props.size,"data-badge":this.props.badge,"data-tabindex":this.props.tabindex})}}]),t}(i.Component);t.default=p,p.propTypes=s,p.defaultProps={elementID:"g-recaptcha",className:"g-recaptcha",onloadCallback:void 0,onloadCallbackName:"onloadCallback",verifyCallback:void 0,verifyCallbackName:"verifyCallback",expiredCallback:void 0,expiredCallbackName:"expiredCallback",render:"onload",theme:"light",type:"image",size:"normal",tabindex:"0",hl:"en",badge:"bottomright"},e.exports=t.default},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,a,i,o,l,s){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,i,o,l,s],p=0;(c=new Error(t.replace(/%s/g,(function(){return u[p++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r=n(1),a=n(2),i=n(5);e.exports=function(){function e(e,t,n,r,o,l){l!==i&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){e.exports=n(3)()},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=r}]))},855:function(e,t,n){var r=n(856);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(47)(r,a);r.locals&&(e.exports=r.locals)},856:function(e,t,n){(e.exports=n(46)(!1)).push([e.i,'.rjsf #root_rgpd {\r\n  margin-right: 6px;\r\n}\r\n\r\n.rjsf input[type="checkbox"],\r\n.rjsf input[type="radio"] {\r\n  margin-right: 6px;\r\n}\r\n\r\n.radius-border-input-email input {\r\n  border-bottom-right-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\n.rjsf.form-newsletter {\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\ndiv.field-error.has-error.has-danger .form-control {\r\n  border-color: var(--danger);\r\n  border-width: 1px;\r\n}\r\n\r\n.we-dropdown-item.we-disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.wifeo-form-custom [contenteditable]:focus {\r\n  outline: 0px solid transparent;\r\n}\r\n.wifeo-form-custom textarea {\r\n  resize: none;\r\n}\r\n',""])},857:function(e,t,n){var r=n(858);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(47)(r,a);r.locals&&(e.exports=r.locals)},858:function(e,t,n){(e.exports=n(46)(!1)).push([e.i,".icon-actions-form {\r\n  width: 36px;\r\n  text-align: center;\r\n}\r\n\r\n.hidden-title label.control-label {\r\n  visibility: hidden;\r\n}\r\n\r\n/* Extra small devices (phones, less than 768px) */\r\n/* .width-form-custom {\r\n  width: 60%;\r\n} */\r\n\r\n/* Small devices (tablets, 768px and up) */\r\n/* @media (min-width: 768px) { ... } */\r\n\r\n/* Medium devices (desktops, 992px and up) */\r\n/* @media (min-width: 992px) {\r\n  .width-form-custom {\r\n    width: 66%;\r\n  }\r\n} */\r\n\r\n/* Large devices (large desktops, 1200px and up) */\r\n/* @media (min-width: 1200px) {\r\n  .width-form-custom {\r\n    width: 76%;\r\n  }\r\n} */\r\n",""])}}]);