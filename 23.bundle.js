(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{265:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(17),e=n.n(r),r=n(0),c=n.n(r);n(269);function i(t){return c.a.createElement("div",{className:"we-form-group we-mb-0",onClick:function(){return t.handleChange()}},c.a.createElement("div",{className:"switch switch-sm"},c.a.createElement("input",{className:"switch",type:"checkbox",checked:t.checked,onClick:function(){return t.handleChange()}}),t.label&&c.a.createElement("label",{className:"text-white"},t.label)))}i.propTypes={checked:e.a.any,handleChange:e.a.func,label:e.a.string}},269:function(t,e,n){var r=n(270);"string"==typeof r&&(r=[[t.i,r,""]]);var c={hmr:!0,transform:void 0,insertInto:void 0};n(70)(r,c);r.locals&&(t.exports=r.locals)},270:function(t,e,n){(t.exports=n(69)(!1)).push([t.i,'\r\n\r\n.switch {\r\n    font-size: 1rem;\r\n    position: relative\r\n}\r\n\r\n.switch input {\r\n    position: absolute;\r\n    height: 1px;\r\n    width: 1px;\r\n    background: 0 0;\r\n    border: 0;\r\n    clip: rect(0 0 0 0);\r\n    -webkit-clip-path: inset(50%);\r\n    clip-path: inset(50%);\r\n    overflow: hidden;\r\n    padding: 0\r\n}\r\n\r\n.switch input + label {\r\n    position: relative;\r\n    min-width: calc(calc(2.375rem * .8) * 2);\r\n    border-radius: calc(2.375rem * .8);\r\n    height: calc(2.375rem * .8);\r\n    line-height: calc(2.375rem * .8);\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    outline: 0;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    vertical-align: middle;\r\n    text-indent: calc(calc(calc(2.375rem * .8) * 2) + .5rem)\r\n}\r\n\r\n.switch input + label::after, .switch input + label::before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: calc(calc(2.375rem * .8) * 2);\r\n    bottom: 0;\r\n    display: block\r\n}\r\n\r\n.switch input + label::before {\r\n    right: 0;\r\n    background-color: #dee2e6;\r\n    border-radius: calc(2.375rem * .8);\r\n    -webkit-transition: .2s;\r\n    transition: .2s\r\n}\r\n\r\n.switch input + label::after {\r\n    top: 2px;\r\n    left: 2px;\r\n    width: calc(calc(2.375rem * .8) - calc(2px * 2));\r\n    height: calc(calc(2.375rem * .8) - calc(2px * 2));\r\n    border-radius: 50%;\r\n    background-color: var(--we-dark);\r\n    -webkit-transition: .2s;\r\n    transition: .2s\r\n}\r\n\r\n.switch input:checked + label::before {\r\n    background-color: var(--we-primary)\r\n}\r\n\r\n.switch input:checked + label::after {\r\n    margin-left: calc(2.375rem * .8)\r\n}\r\n\r\n.switch input:focus + label::before {\r\n    outline: 0;\r\n    -webkit-box-shadow: 0 0 0 .2rem rgba(30, 136, 229, .25);\r\n    box-shadow: 0 0 0 .2rem rgba(30, 136, 229, .25)\r\n}\r\n\r\n.switch input:disabled + label {\r\n    color: #868e96;\r\n    cursor: not-allowed\r\n}\r\n\r\n.switch input:disabled + label::before {\r\n    background-color: #e9ecef\r\n}\r\n\r\n.switch.switch-sm {\r\n    font-size: .875rem\r\n}\r\n\r\n.switch.switch-sm input + label {\r\n    min-width: calc(calc(1.9375rem * .8) * 2);\r\n    height: calc(1.9375rem * .8);\r\n    line-height: calc(1.9375rem * .8);\r\n    text-indent: calc(calc(calc(1.9375rem * .8) * 2) + .5rem)\r\n}\r\n\r\n.switch.switch-sm input + label::before {\r\n    width: calc(calc(1.9375rem * .8) * 2)\r\n}\r\n\r\n.switch.switch-sm input + label::after {\r\n    width: calc(calc(1.9375rem * .8) - calc(2px * 2));\r\n    height: calc(calc(1.9375rem * .8) - calc(2px * 2))\r\n}\r\n\r\n.switch.switch-sm input:checked + label::after {\r\n    margin-left: calc(1.9375rem * .8)\r\n}\r\n\r\n.switch.switch-lg {\r\n    font-size: 1.25rem\r\n}\r\n\r\n.switch.switch-lg input + label {\r\n    min-width: calc(calc(3rem * .8) * 2);\r\n    height: calc(3rem * .8);\r\n    line-height: calc(3rem * .8);\r\n    text-indent: calc(calc(calc(3rem * .8) * 2) + .5rem)\r\n}\r\n\r\n.switch.switch-lg input + label::before {\r\n    width: calc(calc(3rem * .8) * 2)\r\n}\r\n\r\n.switch.switch-lg input + label::after {\r\n    width: calc(calc(3rem * .8) - calc(2px * 2));\r\n    height: calc(calc(3rem * .8) - calc(2px * 2))\r\n}\r\n\r\n.switch.switch-lg input:checked + label::after {\r\n    margin-left: calc(3rem * .8)\r\n}\r\n\r\n.switch + .switch {\r\n    margin-left: 1rem\r\n}\r\n',""])},947:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),c=n(9),i=n(7),a=n(8),l=n(13),s=n(11),u=n(15),p=n(16),h=n(64),r=n(142),d=n.n(r),f=n(108),m=n(42),b=n(265),g=n(6);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);(r="function"==typeof Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})):r).forEach(function(t){j(e,t,n[t])})}return e}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=S(n);return t=r?(t=S(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==k(t)&&"function"!=typeof t?C(e):t}}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(c,o.a.Component);var t,e,n,r=O(c);function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),j(C(t=r.call(this,t)),"getValues",function(t){var e,n;return"media"===t.name||"card"===t.name?t.item&&t.item.link&&(e=t.item.link.link,n="_blank"===t.item.link.target):(e=t.link||"",n=t.newOnglet||!1),{link:e,newOnglet:n}}),t.state={newOnglet:t.getValues(t.props.currentCta).newOnglet,link:t.getValues(t.props.currentCta).value,forcedLink:t.props.currentCta.forcedLink},t}return t=c,(e=[{key:"applyLink",value:function(t,e){"media"===t.name||"card"===t.name?null===e?(delete t.item.link,delete t.item.target,t.item.tpl="img"):(t.item.link={link:e,target:this.state.newOnglet?"_blank":"_self"},t.item.tpl="imgLink"):null===e?(delete t.link,delete t.newOnglet):(t.link=e,t.newOnglet="_blank"===this.state.newOnglet)}},{key:"updateLink",value:function(t){var e=this,n=!(!t||!t.module),r=(t&&t.is_home?"/":!n&&t.slug)||t.url,c=w({},this.props.section),n=Object(s.f)(c.content&&c.content.blocks||[],"uid",this.props.currentCta.uid);n&&((t=this.props.ctaIntent).uids&&t.uids.forEach(function(t){t=Object(s.f)(c.content&&c.content.blocks||[],"uid",t);e.applyLink(t,r)}),this.applyLink(n,r),this.setState(w({},this.state,{link:r})),this.props.setCtaInEdit(n),"NavbarRcpt"===c.componentName?this.props.updateSiteNavbarAction(c.content):"FooterRcpt"===c.componentName?this.props.updateSiteFooterAction(c.content):this.props.updateSectionContent(c.content))}},{key:"removeLink",value:function(){var t,e=this,n=w({},this.props.section),r=Object(s.f)(n.content&&n.content.blocks||[],"uid",this.props.currentCta.uid);r&&((t=this.props.ctaIntent).uids&&t.uids.forEach(function(t){t=Object(s.f)(n.content&&n.content.blocks||[],"uid",t);e.applyLink(t,null)}),this.applyLink(r,null),this.setState(w({},this.state,{link:null})),this.props.setCtaInEdit(r),"NavbarRcpt"===n.componentName?this.props.updateSiteNavbarAction(n.content):"FooterRcpt"===n.componentName?this.props.updateSiteFooterAction(n.content):this.props.updateSectionContent(n.content))}},{key:"shouldComponentUpdate",value:function(t,e){if(e.link!==this.state.link)return!0;if(!t.currentCta||"media"!==t.currentCta.name&&"card"!==t.currentCta.name){if(t.currentCta&&t.currentCta.link!==this.props.currentCta.link)return!0}else if(this.props.currentCta.item&&this.props.currentCta.item.link&&t.currentCta.item.link.link!==this.props.currentCta.item.link.link)return!0;return e.forcedLink!==this.state.forcedLink}},{key:"toggleTarget",value:function(){var n=this,r=!(r=this.state.newOnglet),c=w({},this.props.section),i=Object(s.f)(c.content&&c.content.blocks||[],"uid",this.props.currentCta.uid);i&&this.setState(w({},this.state,{newOnglet:r}),function(){var t=!1,e=n.props.ctaIntent;e.uids&&(t=!0,e.uids.forEach(function(t){Object(s.f)(c.content&&c.content.blocks||[],"uid",t).newOnglet=r})),"media"!==i.name&&"card"!==i.name||!i.item.link?i.link&&(t=!0,i.newOnglet=r):(t=!0,i.item.link.target=r?"_blank":"_self"),t&&("NavbarRcpt"===c.componentName?n.props.updateSiteNavbarAction(c.content):"FooterRcpt"===c.componentName?n.props.updateSiteFooterAction(c.content):n.props.updateSectionContent(c.content)),n.props.setCtaInEdit(i)})}},{key:"toggleForcedLink",value:function(t){var n=this;this.setState(w({},this.state,{forcedLink:t}),function(){var t=w({},n.props.section),e=Object(s.f)(t.content&&t.content.blocks||[],"uid",n.props.currentCta.uid);e.forcedLink=n.state.forcedLink,console.log({cta:e}),"NavbarRcpt"===t.componentName?n.props.updateSiteNavbarAction(t.content):"FooterRcpt"===t.componentName?n.props.updateSiteFooterAction(t.content):n.props.updateSectionContent(t.content),n.props.setCtaInEdit(e)})}},{key:"render",value:function(){var e=this,t=this.props.currentCta,n=this.state.forcedLink,r=this.getValues(t),c=r.link,i=r.newOnglet,r=location.href.includes("editor/funnel");return console.log({isFunnel:r}),console.log({object:t}),o.a.createElement("div",null,o.a.createElement(f.a,{onClick:function(){return e.props.closeLinkToolAction()}},"Modifier Lien"),r&&o.a.createElement(g.Alert,{variant:"info"},"Pas défaut un lien dans un funnel amenera vers la page suivante"),r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{label:"Appliquer un autre lien ",checked:n,handleChange:function(){e.toggleForcedLink(!n)}})),r&&n&&o.a.createElement(m.a,null,o.a.createElement(d.a,{onClick:function(t){return e.updateLink(t)},removeLink:function(){return e.removeLink()},toggleTarget:function(){return e.toggleTarget()},selectFile:function(){e.props.setMediaIntent("select_file_for_cta",e.props.currentCta),e.props.wantSelectFileAction()},fetchers:{page:Object(p.g)().apiSitesSlugPagesGet,module:Object(p.d)().apiSitesSlugModulesModulePagesGet,blog:Object(h.b)().apiBlogsSlugArticlesGet},siteId:this.props.siteId,shopId:this.props.shopId,blogId:this.props.blogId,value:c,target:i,itemClassname:"we-text-white",selectedItemClassname:"we-bg-secondary",unSelectedItemClassname:"we-bg-dark",canMultipleValue:!1,excludeList:[]})," "))}}])&&y(t.prototype,e),n&&y(t,n),c}();e.default=Object(c.connect)(function(t){return{section:Object(i.M)(t).section,currentCta:t.tools.ctaInEdit,ctaIntent:t.tools.ctaIntent,siteId:Object(i.j)(t).id,shopId:Object(i.I)(t),blogId:Object(i.c)(t)}},{setMediaIntent:a.o,wantSelectFileAction:a.A,updateSectionContent:l.S,updateSiteFooterAction:u.l,updateSiteNavbarAction:u.m,closeLinkToolAction:a.e,setCtaInEdit:a.k})(n)}}]);