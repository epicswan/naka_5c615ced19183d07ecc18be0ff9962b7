(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{650:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(29),a=n(30),c=n.n(a),s=n(92),l=n(100),u=n(9),f=n.n(u);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=["blocks","bgCards"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=f.a._store.getEnv(),P=_.scheme,j=_.domain,x=_.subdomain,S=_.apiProd,C=_.domainApi,E=S?x:"blog",A="".concat(P,"://").concat(E,".").concat(S?C:j).replace("__API__","blog");n(56)().format();var M=c.a.CancelToken,L=f.a._css,R=f.a._getSrcSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,r,a=v(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),k(w(t=a.call(this,e)),"cachedItems",null),t.blogModule=f.a._store.getUidSite("blog");var n={1:"col",2:"col-md-6",3:"col-md-4",4:"col-md-3"};if(t.props.items.items.length>0){var r=t.props.items,i=r.numItems,c=r.page,s=r.totalItems;t.state={cancelToken:null,forcePage:1,inLoading:!0,items:t.transformItems(t.props.items.items),numItems:i,page:c,totalItems:s,grid:n}}else t.state={cancelToken:null,forcePage:1,items:[],grid:n,inLoading:!0};return t.refArticles=o.a.createRef(),t}return t=u,(n=[{key:"getGrid",value:function(e,t){var n=this.state.grid,r=this.props.widthClass,o=n[e]||n[0];return void 0===e&&(o="col-md-12"===r?n[0]:n[1]),L(t,"col-12",o)}},{key:"getItems",value:function(e,t){return"edit"===this.props.mode&&(t.no_cache=!0),new Promise((function(n,r){c.a.get(e,{cancelToken:new M((function(e){e})),params:t}).then((function(e){n(e)})).catch((function(e){r(e)}))}))}},{key:"moreItem",value:function(){this.props.onAction({action:"click_new_item",data:{}})}},{key:"componentDidUpdate",value:function(e){e.tpl!==this.props.tpl&&this.cachedItems&&this.setState({items:this.transformItems(this.cachedItems)})}},{key:"componentDidMount",value:function(){this.loadItems(1,"init")}},{key:"loadItems",value:function(e,t){var n=this,r=this.blogModule&&this.blogModule.distant_id||this.props.idBlog,o=A+"/public/blogs/"+r+"/articles";this.props.categorie&&void 0!==this.props.categorie.id&&(o=A+"/public/categories/"+this.props.categorie.id+"/articles");var i={page:e};this.getItems(o,i).then((function(e){var r=e.data.items,o=e.data,i=o.numItems,a=o.page,c=o.totalItems;r=n.transformItems(r),n.setState({items:r,numItems:i,page:a,totalItems:c,inLoading:!1},(function(){if("page_change"===t){var e=n.refArticles.current;if(e){var r=e.querySelector('[card-index="0"]');$("html, body").animate({scrollTop:$(r).offset().top-55},750)}}}))})).catch((function(e){return console.log("erreur!!",e)}))}},{key:"transformItems",value:function(e){this.cachedItems=e;var t=this.props,n=t.tpl;return t.blocks,e.map((function(e){var t=e.article_histories[0],r=t.src_set&&R(JSON.parse(t.src_set)),o={active:!0,class:"",link:"/blog/"+e.slug,txt:"Lire la suite",icon:"",target:"_self"};return h({},e,{title:{txt:e.title,class:"",visible:!0},txt:{txt:t.description,class:"",visible:!0},link:o,linkOnCard:h({},o,{active:!0}),item:{link:o,img:{path:t.image,css:"img-fluid"},tpl:"Card2"===n?"bgImgLink":"imgLink",visible:t.image&&"https://mediacache.epicred.fr/4X6DE68rOO9oeeAGN6wlzbLgPTU=/1920x/https://media.epicred.fr/media/cache/original/all/5c1901e87c038.png"!==t.image,srcSet:r}})}))}},{key:"onActionPagination",value:function(e){var t=this;"page_change"===e.action&&this.setState({inLoading:!0},(function(){t.loadItems(e.data.nextPage,e.action)}))}},{key:"getOrder",value:function(e){var t={img:"left"},n={img:"right"};switch(this.props.orderCard){case 1:return t;case 2:return n;case 3:return e%2==0?t:n;case 4:return e%2==0?n:t;default:return t}}},{key:"render",value:function(){var e=this,t=this.props,n=t.blocks,r=t.bgCards,a=g(t,m),c=this.props,u=c.prefixCss,f=c.mode,p=(c.msgAddItem,c.widthClass,c.tpl),b=(c.onManageModule,c.cardsInRow),y=c.mepOpts,v=c.mep,O=this.state,w=O.totalItems,I=O.numItems,k=O.forcePage,_=O.inLoading,P=k&&k-1||null,j=Math.ceil(w/I),x=(n.find((function(e){return"title"===e.name}))||{title:null}).title,S=this.state.items;return o.a.createElement(i.a,d({title:x},a),_&&o.a.createElement("div",{className:"text-center"},o.a.createElement("i",{className:"fas fa-spinner fa-pulse"})),!_&&0==w&&o.a.createElement("div",{className:"text-center mx-auto my-5"},"Aucun article ne semble en ligne actuellement."),o.a.createElement("div",{style:"edit"===f&&{padding:"1rem"}||{}},o.a.createElement("div",{ref:this.refArticles,"data-app-listing":!0,className:L("","row","justify-content-center")},S.map((function(t,n){var i=e.getOrder(n);return o.a.createElement("div",{key:n,"card-index":n,className:L(u,e.getGrid(b,u),"py-2")},o.a.createElement(l.a,{order:i,mode:"view",card:h({},t,{bg:r}),tpl:p,mep:v,prefixCss:u,mepOpts:y}))})))),j>1&&o.a.createElement(s.a,{forcePage:P,pageCount:j,onAction:function(t){return e.onActionPagination(t)}}))}}])&&b(t.prototype,n),r&&b(t,r),u}(r.Component);T.defaultProps={prefixCss:"",mep:null,mode:"view",sectionCss:"",bg:{class:"bg-white",img:{path:"",class:""}},tpl:"Card2",widthClass:"col-md-12",orderCard:{img:"left"},onManageModule:function(){},blocks:[{name:"title",title:{txt:"BlogiBloga",class:"w-100"}},{name:"stitle",stitle:{txt:"Mon blog à moi",class:""}},{name:"card",pathItem:"",typeItem:""}],msgAddItem:"Gérer le blog",categorie:null,items:{items:[]}},t.default=T}}]);